<!DOCTYPE html>
<html>
<head> 
<meta charset="utf-8"> 
<title>FlorrExt Demo</title> 
</head>
<body>

<canvas id="myCanvas" width="640" height="480" style="border:1px solid #000000;">
您的浏览器不支持 HTML5 canvas 标签。
</canvas>

<script>

    var canvas=document.getElementById("myCanvas");
    var ctx2d=canvas.getContext("2d");

    window.onresize=resizeCanvas;
    function resizeCanvas(){
      canvas.width=window.innerWidth;
      canvas.height=window.innerHeight;
    }
    resizeCanvas(); 
  
    class Hero{
        constructor(x, y, r){
            this.x = x;
            this.y = y;
            this.r = 10;
            this.speed = 4;
            this.targetx = x;
            this.targety = y;
            this.color = "Gold";
        }

        setTarget(x, y){
            this.targetx = x;
            this.targety = y;
        }
        update(){
            let dis = Math.sqrt((this.targety-this.y)**2+(this.targetx - this.x)**2);
            if (dis == 0){
                dis = 1;
            }
            //console.log(this.x,this.speed, (this.targetx - this.x));
            this.x += this.speed * (this.targetx - this.x)/dis;
            this.y += this.speed * (this.targety - this.y)/dis;
            //console.log(this.x);
        }

        render(){
            ctx2d.beginPath();
            ctx2d.arc(this.x,this.y,this.r,0,2*3.14,false);
            ctx2d.fillStyle = this.color;
            ctx2d.fill();
        }
    }


    var h = new Hero(100,100,50);

    /* 给画布绑定鼠标经过事件 */  
    canvas.addEventListener('mousemove',function(e){
    /* 传入x，y，r。offsetX距离左侧距离，..， */
        h.setTarget(e.offsetX,e.offsetY);
    })
    
    /* 定时器渲染小圆，开始动画 ，30毫秒一次 */
    setInterval(function(){
        ctx2d.clearRect(0,0,canvas.width,canvas.height);
        h.update();
        h.render();
    },30)



    
</script>


</body>
</html>
